(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[847],{1056:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(5155),r=s(2115);let n=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),l=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),i=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))});function o(){let[e,t]=(0,r.useState)([]),[s,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)("Test Azure AI with diagnostic question"),u=(e,s)=>{t(t=>t.find(t=>t.name===e)?t.map(t=>t.name===e?{...t,...s}:t):[...t,{name:e,status:"pending",message:"",...s}])},m=async(e,t)=>{let s=Date.now();u(e,{status:"pending",message:"Running..."});try{let a=await t(),r=Date.now()-s;return u(e,{status:"success",message:"Test passed",details:a,duration:r}),a}catch(a){let t=Date.now()-s;throw u(e,{status:"error",message:a instanceof Error?a.message:"Unknown error",duration:t}),a}},h=async()=>{let e=await fetch("/api/health");if(!e.ok)throw Error("HTTP ".concat(e.status));return await e.json()},x=async()=>{let e=await fetch("/api/data/status");if(!e.ok)throw Error("HTTP ".concat(e.status));return await e.json()},g=async()=>{let e=await fetch("/api/database/status");if(!e.ok)throw Error("HTTP ".concat(e.status));return await e.json()},b=async()=>{let e=await fetch("/api/ai/test");if(!e.ok)throw Error("HTTP ".concat(e.status));return await e.json()},w=async()=>{let e=await fetch("/api/ai/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:c})});if(!e.ok)throw Error("HTTP ".concat(e.status));return await e.json()},f=async()=>{for(let e of(o(!0),t([]),[{name:"Health Endpoint",fn:h},{name:"Data Files Status",fn:x},{name:"Database Connection",fn:g},{name:"AI Service Status",fn:b},{name:"AI Response Generation",fn:w}]))try{await m(e.name,e.fn),await new Promise(e=>setTimeout(e,500))}catch(t){console.error("Test failed: ".concat(e.name),t)}o(!1)},p=e=>{switch(e){case"success":return(0,a.jsx)(n,{className:"h-5 w-5 text-green-500"});case"error":return(0,a.jsx)(l,{className:"h-5 w-5 text-red-500"});case"warning":return(0,a.jsx)(i,{className:"h-5 w-5 text-yellow-500"});default:return(0,a.jsx)("div",{className:"h-5 w-5 rounded-full border-2 border-blue-500 border-t-transparent animate-spin"})}},j=e=>{switch(e){case"success":return"border-green-200 bg-green-50";case"error":return"border-red-200 bg-red-50";case"warning":return"border-yellow-200 bg-yellow-50";default:return"border-blue-200 bg-blue-50"}};return(0,a.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Система тестирования маршрутов и данных"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Комплексная проверка всех API маршрутов, файлов данных и сервисов Azure AI"})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Настройки тестирования AI"}),(0,a.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Тестовое сообщение для AI"}),(0,a.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Введите сообщение для тестирования AI..."})]}),(0,a.jsxs)("button",{onClick:f,disabled:s,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s&&(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s?"Выполняется...":"Запустить все тесты"]})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:e.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 ".concat(j(e.status)),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[p(e.status),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name})]}),e.duration&&(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.duration,"ms"]})]}),(0,a.jsx)("p",{className:"text-gray-700 mb-2",children:e.message}),e.details&&(0,a.jsxs)("details",{className:"mt-3",children:[(0,a.jsx)("summary",{className:"cursor-pointer text-sm font-medium text-gray-600 hover:text-gray-800",children:"Подробности"}),(0,a.jsx)("pre",{className:"mt-2 p-3 bg-white rounded border text-xs overflow-auto max-h-64",children:JSON.stringify(e.details,null,2)})]})]},t))}),0===e.length&&!s&&(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:(0,a.jsx)("p",{children:'Нажмите "Запустить все тесты" для начала проверки системы'})}),(0,a.jsxs)("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Что тестируется:"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Health Endpoint:"})," Базовый статус приложения"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Data Files Status:"})," Доступность и структура файлов данных"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Database Connection:"})," Подключение к PostgreSQL"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"AI Service Status:"})," Доступность Azure OpenAI"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"AI Response Generation:"})," Генерация ответов через AI"]})]})]})]})}},6216:(e,t,s)=>{Promise.resolve().then(s.bind(s,1056))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(6216)),_N_E=e.O()}]);