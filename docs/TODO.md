# Truck Repair Assistant — TODO (Q2-Q3 2025)

## Расширенная диагностика AI

### Улучшенная обработка аудио (Web Audio API + Whisper)
- [ ] Провести аудит текущей реализации аудиозаписи (AudioRecorder, AudioAnalysisDisplay)
- [ ] Добавить сохранение аудиофайлов в формате, поддерживаемом Whisper (WAV/FLAC)
- [ ] Реализовать отправку аудиофайла на сервер для анализа через Whisper API (Azure/GitHub Models)
- [ ] Интегрировать парсинг результата Whisper (транскрипция, ключевые слова)
- [ ] Включить транскрипцию аудио в цепочку диагностики AI (prompt)
- [ ] Покрыть тестами: загрузка, отправка, обработка ошибок, отображение результата

### Многошаговые диалоги с AI (multi-turn, context)
- [ ] Реализовать хранение истории сообщений для каждого чата (Zustand/client, сервер/БД)
- [ ] Модифицировать API/сервисы для передачи всей истории сообщений в OpenAI/GitHub Models
- [ ] Добавить UI для истории диалога и возможности “продолжить” разговор
- [ ] Реализовать логику уточняющих вопросов от AI
- [ ] Покрыть тестами: длинные диалоги, edge-cases, сброс истории

### Расширенная обработка ошибок и fallback-логика
- [ ] Перепроверить все AI-интеграции на предмет обработки ошибок (timeout, network, invalid response)
- [ ] Добавить централизованный обработчик ошибок для AI-сервисов
- [ ] Реализовать fallback: если основной AI недоступен — использовать альтернативу
- [ ] В UI добавить информирование пользователя о причинах ошибок и fallback-сценариях
- [ ] Покрыть тестами: имитация ошибок, проверка fallback, пользовательские уведомления

---

## Улучшенная работа с деталями и запчастями

### Интеграция с ценами и наличием (parts lookup, parts pricing)
- [ ] Создать структуру данных для хранения информации о запчастях (JSON/БД: part_id, name, price, stock, vendor)
- [ ] Реализовать UI-компонент “Поиск запчастей” (PartsLookup)
- [ ] Интегрировать поиск по названию/артикулу, фильтрацию по наличию и цене
- [ ] Добавить отображение цен и наличия (mock-данные или интеграция с внешним API)
- [ ] Связать найденные запчасти с результатами AI-диагностики (рекомендации по ремонту → детали)
- [ ] Покрыть тестами: поиск, фильтрация, edge-cases

### Система временных решений и лайфхаков
- [ ] Добавить в структуру AI-ответа поле “Временное решение/лайфхак”
- [ ] Обновить prompt для AI: просить давать временные решения, если это возможно
- [ ] Реализовать отображение временных решений в UI (DiagnosisForm, Results)
- [ ] Добавить возможность пользователям предлагать свои лайфхаки (crowdsourcing, модерация)
- [ ] Покрыть тестами: отображение, добавление, edge-cases
