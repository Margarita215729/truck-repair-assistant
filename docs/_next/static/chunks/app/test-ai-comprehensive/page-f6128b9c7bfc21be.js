(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{5046:(e,s,a)=>{Promise.resolve().then(a.bind(a,9050))},9050:(e,s,a)=>{"use strict";a.a(e,async(e,t)=>{try{a.r(s),a.d(s,{default:()=>l});var i=a(5155),n=a(2115),r=a(8051),d=e([r]);r=(d.then?(await d)():d)[0];let l=()=>{let[e,s]=(0,n.useState)({}),[a,t]=(0,n.useState)(null),[d,l]=(0,n.useState)([]),[c,o]=(0,n.useState)(""),h={id:"test-truck",make:"Peterbilt",model:"379",year:2020,engine:"Caterpillar C15"};(0,n.useEffect)(()=>{m()},[]);let g=async(e,a)=>{t(e);let i=Date.now();try{let t=await a(),n=Date.now()-i;s(s=>({...s,[e]:{success:!0,duration:n,provider:t.provider,fallbackUsed:t.fallbackUsed,data:t.result||t}}))}catch(t){let a=Date.now()-i;s(s=>({...s,[e]:{success:!1,duration:a,error:t instanceof Error?t.message:"Unknown error"}}))}finally{t(null)}},m=async()=>{await g("health-check",async()=>{let e=await r.t$.checkHealth();return l([e]),e})},u=async()=>{let e={truck:h,symptoms:["Engine making unusual noise","Reduced power","Black smoke from exhaust"],additionalInfo:"Truck has been driven for 500,000 miles. Last maintenance was 3 months ago.",urgency:"medium"};await g("enhanced-diagnosis",async()=>await r.t$.diagnoseTruckIssue(e))},b=async()=>{let e={truck:h,symptoms:["Engine overheating","Coolant leak","Temperature gauge in red zone"],additionalInfo:"Truck stopped on highway due to overheating warning.",urgency:"high"};await g("legacy-diagnosis",async()=>await r.t$.diagnoseTruckIssue(e))},x=async()=>{let e=[{role:"user",content:"What are the most common issues with Caterpillar C15 engines?"}];await g("enhanced-chat",async()=>await r.t$.chatWithAssistant(e))},p=async()=>{o("");let e=[{role:"user",content:"Explain the process of diagnosing a diesel engine that has black smoke coming from the exhaust."}];await g("streaming-chat",async()=>{try{let s=await r.t$.chatWithAssistant(e);return o(s),s}catch(e){throw Error("Streaming not yet implemented for client-side service")}})},y=async()=>{await g("config-changes",async()=>({message:"Configuration changes not available in client service",availableEndpoints:["/api/ai/diagnose","/api/ai/chat","/api/ai/health"]}))},v=async()=>{await g("timeout-test",async()=>{let e=new AbortController,s=setTimeout(()=>e.abort(),1);try{return await fetch("/api/ai/diagnose",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({truck:h,symptoms:["Test timeout"],urgency:"low"}),signal:e.signal}),{timeoutTriggered:!1}}catch(e){return{timeoutTriggered:!0,error:e instanceof Error?e.message:"Unknown error"}}finally{clearTimeout(s)}})},w=(e,s)=>s?(0,i.jsxs)("div",{className:"p-4 rounded-lg border ".concat(s.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,i.jsx)("h4",{className:"font-semibold",children:e}),(0,i.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat(s.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:s.success?"PASS":"FAIL"})]}),(0,i.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,i.jsxs)("div",{children:["Duration: ",s.duration,"ms"]}),s.provider&&(0,i.jsxs)("div",{children:["Provider: ",s.provider]}),void 0!==s.fallbackUsed&&(0,i.jsxs)("div",{children:["Fallback used: ",s.fallbackUsed?"Yes":"No"]}),s.error&&(0,i.jsxs)("div",{className:"text-red-600 bg-red-50 p-2 rounded",children:["Error: ",s.error]})]})]}):null;return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,i.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-8",children:"\uD83D\uDD27 Comprehensive AI Integration Test Suite"}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,i.jsxs)("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:["\uD83C\uDFE5 Health Status",(0,i.jsx)("button",{onClick:m,disabled:"health-check"===a,className:"ml-4 px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:"health-check"===a?"Checking...":"Refresh"})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(e=>(0,i.jsxs)("div",{className:"p-4 rounded-lg border ".concat(e.isHealthy?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[(0,i.jsx)("h3",{className:"font-semibold capitalize",children:e.service.replace("-"," ")}),(0,i.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,i.jsxs)("div",{children:["Status: ",e.isHealthy?"✅ Healthy":"❌ Unhealthy"]}),e.latency&&(0,i.jsxs)("div",{children:["Latency: ",e.latency,"ms"]}),e.error&&(0,i.jsxs)("div",{className:"text-red-600",children:["Error: ",e.error]})]})]},e.service))})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,i.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"\uD83E\uDDEA Test Controls"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[(0,i.jsx)("button",{onClick:u,disabled:"enhanced-diagnosis"===a,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:"enhanced-diagnosis"===a?"Testing...":"Enhanced Diagnosis"}),(0,i.jsx)("button",{onClick:b,disabled:"legacy-diagnosis"===a,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:"legacy-diagnosis"===a?"Testing...":"Legacy Diagnosis"}),(0,i.jsx)("button",{onClick:x,disabled:"enhanced-chat"===a,className:"bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 disabled:opacity-50",children:"enhanced-chat"===a?"Testing...":"Enhanced Chat"}),(0,i.jsx)("button",{onClick:p,disabled:"streaming-chat"===a,className:"bg-orange-600 text-white px-4 py-2 rounded-md hover:bg-orange-700 disabled:opacity-50",children:"streaming-chat"===a?"Streaming...":"Streaming Chat"}),(0,i.jsx)("button",{onClick:y,disabled:"config-changes"===a,className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 disabled:opacity-50",children:"config-changes"===a?"Testing...":"Config Changes"}),(0,i.jsx)("button",{onClick:v,disabled:"timeout-test"===a,className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 disabled:opacity-50",children:"timeout-test"===a?"Testing...":"Timeout Test"})]})]}),c&&(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,i.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"\uD83C\uDF0A Streaming Output"}),(0,i.jsx)("div",{className:"bg-gray-100 p-4 rounded-lg",children:(0,i.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:c})})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,i.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"\uD83D\uDCCA Test Results"}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(e).map(e=>{let[s,a]=e;return(0,i.jsx)("div",{children:w(s,a)},s)})})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mt-6",children:[(0,i.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"⚙️ Current Configuration"}),(0,i.jsx)("div",{className:"bg-gray-100 p-4 rounded-lg",children:(0,i.jsx)("pre",{className:"text-sm",children:JSON.stringify({service:"Client AI Service",baseUrl:"/api",availableEndpoints:["/api/ai/diagnose","/api/ai/chat","/api/ai/health"],environment:"production"},null,2)})})]})]})})};t()}catch(e){t(e)}})}},e=>{var s=s=>e(e.s=s);e.O(0,[882,51,441,684,358],()=>s(5046)),_N_E=e.O()}]);